(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{503:function(t,e,n){"use strict";var r={name:"Badge",props:{icon:String,color:{default:"blue"}},computed:{colorClasses:function(){var t={blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",green:"bg-green-100 text-green-800"};return t.hasOwnProperty(this.color)?t[this.color]:t.blue}}},c=n(15),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-2 py-1 space-x-1 inline-flex items-center text-xs rounded-full  ",class:t.colorClasses},[t.icon?n("i",{class:["la la-lg la-"+t.icon]}):t._e(),t._v(" "),this.$slots.default?n("span",[t._t("default")],2):t._e()])}),[],!1,null,null,null);e.a=component.exports},504:function(t,e,n){"use strict";t.exports=n(535)},505:function(t,e,n){"use strict";var r={name:"DataCard",components:{Dropdown:n(508).a},props:{data:{type:Object,required:!0}},data:function(){return{}},computed:{},methods:{}},c=(n(526),n(15)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"block bg-gray-50"},[n("dropdown",{staticClass:"p-2 sm:p-4",scopedSlots:t._u([{key:"trigger",fn:function(){return[n("div",{staticClass:"flex items-center justify-between"},[n("p",{staticClass:"text-sm font-medium text-blue-600"},[t.data.data_type.icon?n("i",{staticClass:"la la-lg",class:["la-"+t.data.data_type.icon]}):t._e(),t._v("\n                "+t._s(t.data.data_type.name)+"\n            ")])])]},proxy:!0}])},[t._v(" "),n("div",{staticClass:"mt-2 sm:flex sm:justify-between"},[n("div",{staticClass:"sm:grid",class:["2"]},[t.data.trigger?n("p",{staticClass:"flex  items-center text-sm text-gray-500"},[n("i",{staticClass:"flex-shrink-0 mr-1.5 text-gray-400 la la-lg la-clock"}),t._v("\n            "+t._s(t.data.trigger)+"\n          ")]):t._e(),t._v(" "),t.data.storage?n("p",{staticClass:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0 sm:ml-6"},[n("i",{staticClass:"flex-shrink-0 mr-1.5 text-gray-400 la la-lg la-save"}),t._v("\n              "+t._s(t.data.storage)+"\n          ")]):t._e()])])])],1)])}),[],!1,null,"ecfed2ec",null);e.a=component.exports},506:function(t,e,n){var content=n(515);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("4c343c54",content,!0,{sourceMap:!1})},507:function(t,e,n){var content=n(517);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("972536a2",content,!0,{sourceMap:!1})},508:function(t,e,n){"use strict";var r={name:"Dropdown",props:{startOpen:{},showIcon:{default:!0}},data:function(){return{show:!1}},methods:{toggleShow:function(){this.show=!this.show}},mounted:function(){this.startOpen&&(this.show=!0)}},c=(n(524),n(15)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"trigger flex flex-row justify-between",on:{click:function(e){return t.toggleShow()}}},[t.showIcon?n("svg",{staticClass:"transform",class:{"-rotate-90":t.show},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 11 14"}},[n("path",{attrs:{fill:"#869AB8",d:"M9.148 2.352l-4.148 4.148 4.148 4.148q0.148 0.148 0.148 0.352t-0.148 0.352l-1.297 1.297q-0.148 0.148-0.352 0.148t-0.352-0.148l-5.797-5.797q-0.148-0.148-0.148-0.352t0.148-0.352l5.797-5.797q0.148-0.148 0.352-0.148t0.352 0.148l1.297 1.297q0.148 0.148 0.148 0.352t-0.148 0.352z"}})]):t._e(),t._v(" "),t._t("trigger")],2),t._v(" "),n("div",{staticClass:"content"},[t.show?t._t("default"):t._e()],2)])}),[],!1,null,"f4817ffa",null);e.a=component.exports},509:function(t,e,n){"use strict";t.exports=n(523)},510:function(t,e,n){"use strict";var r=n(504),c=n.n(r),o=(n(10),n(511)),l=n(508),d=n(503),f={name:"FunctionalityCard",components:{ServiceCard:o.a,Dropdown:l.a,Badge:d.a},props:{functionality:{type:Object,required:!0},value:{}},data:function(){return{}},computed:{functionalities:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},cloud:function(){return this.functionality.services.some((function(t){return t.cloud}))}},methods:{}},v=(n(516),n(15)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative rounded-lg border border-gray-300 bg-white px-6 py-5 shadow-sm flex items-top space-x-3 hover:border-gray-400"},[n("div",{staticClass:"flex-shrink-0 rounded-full flex items-center mr-2"},[n(c.a,{attrs:{value:t.functionality.id,name:"device_functionalities"},model:{value:t.functionalities,callback:function(e){t.functionalities=e},expression:"functionalities"}})],1),t._v(" "),n("dropdown",{staticClass:"flex-1 min-w-0"},[n("div",{staticClass:"focus:outline-none",attrs:{slot:"trigger"},slot:"trigger"},[n("div",{staticClass:"flex space-between flex-row items-center"},[n("div",{staticClass:"flex-1"},[n("p",{staticClass:"text-sm font-medium text-gray-900"},[t._v("\n              "+t._s(t.functionality.name)+"\n              "),t.cloud?n("badge",{attrs:{icon:"cloud"}}):t._e()],1),t._v(" "),n("p",{staticClass:"text-sm text-gray-500 truncate"},[t._l(t.functionality.services,(function(e){return t._l(e.service_data,(function(data){return data.data_type.icon?n("i",{key:data.id,staticClass:"la la-lg",class:["la-"+data.data_type.icon]}):t._e()}))}))],2)])])]),t._v(" "),n("div",{staticClass:"border-t border-blue-500 mt-1 divide-y-2"},t._l(t.functionality.services,(function(t){return n("service-card",{key:t.id,attrs:{service:t}})})),1)])],1)}),[],!1,null,"1812259c",null);e.a=component.exports},511:function(t,e,n){"use strict";n(34);var r=n(505),c=n(503),o={name:"ServiceCard",components:{DataCard:r.a,Badge:c.a},props:{service:{type:Object,required:!0}},computed:{name:function(){return this.service.server_group?this.service.server_group.name:this.service.device_type?this.service.device_type.name:"Any device"}},methods:{}},l=(n(514),n(15)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"py-2"},[n("div",[n("div",{staticClass:"flex space-between flex-row items-center"},[n("div",{staticClass:"flex-1"},[n("p",{staticClass:"text-sm font-medium text-gray-900 flex justify-between"},[t._v("\n                    "+t._s(t.name)+"\n                    "),t.service.cloud?n("badge",{attrs:{icon:"cloud"}},[t._v(" Cloud")]):t._e()],1)]),t._v(" "),n("div",[t.service.server_group&&t.service.server_group.locations.length?n("div",{staticClass:"text-sm text-gray-500"},[n("i",{staticClass:"la la-map-pin"}),t._v(t._s(t.service.server_group.locations.map((function(t){return t.country})).join(", "))+"\n                ")]):t._e()])]),t._v(" "),n("div",{staticClass:"divide-y rounded-xl overflow-hidden mt-2"},t._l(t.service.service_data,(function(data){return n("data-card",{key:data.id,staticClass:"divide-1",attrs:{data:data}})})),1)])])}),[],!1,null,"3c2e9c90",null);e.a=component.exports},512:function(t,e,n){var content=n(525);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("576714ae",content,!0,{sourceMap:!1})},513:function(t,e,n){var content=n(527);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("d86d53e2",content,!0,{sourceMap:!1})},514:function(t,e,n){"use strict";n(506)},515:function(t,e,n){var r=n(21)((function(i){return i[1]}));r.push([t.i,'.flex-wrap.justify-between[data-v-3c2e9c90]:after{content:"";flex:auto}.vertical-align[data-v-3c2e9c90]{position:absolute;top:50%;transform:translateY(-50%);right:16px}',""]),r.locals={},t.exports=r},516:function(t,e,n){"use strict";n(507)},517:function(t,e,n){var r=n(21)((function(i){return i[1]}));r.push([t.i,'.flex-wrap.justify-between[data-v-1812259c]:after{content:"";flex:auto}.vertical-align[data-v-1812259c]{position:absolute;top:50%;transform:translateY(-50%);right:16px}img[data-v-1812259c]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}',""]),r.locals={},t.exports=r},523:function(t,e,n){"use strict";n.r(e);var r=n(154),c={props:{label:{type:String},icon:{type:String},iconPos:{type:String,default:"left"},badge:{type:String},badgeClass:{type:String,default:null}},computed:{buttonClass:function(){return{"p-button p-component":!0,"p-button-icon-only":this.icon&&!this.label,"p-button-vertical":("top"===this.iconPos||"bottom"===this.iconPos)&&this.label,"p-disabled":this.disabled}},iconClass:function(){return[this.icon,"p-button-icon",{"p-button-icon-left":"left"===this.iconPos&&this.label,"p-button-icon-right":"right"===this.iconPos&&this.label,"p-button-icon-top":"top"===this.iconPos&&this.label,"p-button-icon-bottom":"bottom"===this.iconPos&&this.label}]},badgeStyleClass:function(){return["p-badge p-component",this.badgeClass,{"p-badge-no-gutter":this.badge&&1===String(this.badge).length}]}},directives:{ripple:n.n(r).a}},o=n(15),component=Object(o.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",t._g({directives:[{name:"ripple",rawName:"v-ripple"}],class:t.buttonClass,attrs:{type:"button"}},t.$listeners),[t._t("default",(function(){return[t.icon?n("span",{class:t.iconClass}):t._e(),t._v(" "),n("span",{staticClass:"p-button-label"},[t._v(t._s(t.label||"Â "))]),t._v(" "),t.badge?n("span",{staticClass:"p-badge",class:t.badgeStyleClass},[t._v(t._s(t.badge))]):t._e()]}))],2)}),[],!1,null,null,null);e.default=component.exports},524:function(t,e,n){"use strict";n(512)},525:function(t,e,n){var r=n(21)((function(i){return i[1]}));r.push([t.i,".trigger[data-v-f4817ffa]{position:relative;padding-right:14px}.trigger svg[data-v-f4817ffa]{position:absolute;top:50%;right:0;width:14px;height:14px;padding:0;margin-top:-7px;transition:transform .3s}.content>*[data-v-f4817ffa],.trigger svg[data-v-f4817ffa]{display:block}",""]),r.locals={},t.exports=r},526:function(t,e,n){"use strict";n(513)},527:function(t,e,n){var r=n(21)((function(i){return i[1]}));r.push([t.i,'.flex-wrap.justify-between[data-v-ecfed2ec]:after{content:"";flex:auto}.vertical-align[data-v-ecfed2ec]{position:absolute;top:50%;transform:translateY(-50%);right:16px}img[data-v-ecfed2ec]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}',""]),r.locals={},t.exports=r},535:function(t,e,n){"use strict";n.r(e);var r=n(98),c=(n(23),n(10),n(60),n(356)),o=n.n(c),l={inheritAttrs:!1,props:{value:null,modelValue:null,binary:Boolean,trueValue:{type:null,default:!0},falseValue:{type:null,default:!1}},model:{prop:"modelValue",event:"input"},data:function(){return{focused:!1}},methods:{onClick:function(t){var e,n=this;this.$attrs.disabled||(e=this.binary?this.checked?this.falseValue:this.trueValue:this.checked?this.modelValue.filter((function(t){return!o.a.equals(t,n.value)})):this.modelValue?[].concat(Object(r.a)(this.modelValue),[this.value]):[this.value],this.$emit("click",t),this.$emit("input",e),this.$emit("change",t),this.$refs.input.focus())},onFocus:function(t){this.focused=!0,this.$emit("focus",t)},onBlur:function(t){this.focused=!1,this.$emit("blur",t)}},computed:{checked:function(){return this.binary?this.modelValue===this.trueValue:o.a.contains(this.value,this.modelValue)},containerClass:function(){return["p-checkbox p-component",{"p-checkbox-checked":this.checked,"p-checkbox-disabled":this.$attrs.disabled,"p-checkbox-focused":this.focused}]}}},d=n(15),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.containerClass,on:{click:function(e){return t.onClick(e)}}},[n("div",{staticClass:"p-hidden-accessible"},[n("input",t._b({ref:"input",attrs:{type:"checkbox"},domProps:{checked:t.checked,value:t.value},on:{focus:function(e){return t.onFocus(e)},blur:function(e){return t.onBlur(e)}}},"input",t.$attrs,!1))]),t._v(" "),n("div",{ref:"box",class:["p-checkbox-box",{"p-highlight":t.checked,"p-disabled":t.$attrs.disabled,"p-focus":t.focused}],attrs:{role:"checkbox","aria-checked":t.checked}},[n("span",{class:["p-checkbox-icon",{"pi pi-check":t.checked}]})])])}),[],!1,null,null,null);e.default=component.exports},536:function(t,e,n){"use strict";n.r(e);n(33),n(24),n(23),n(36),n(28),n(37);var r=n(16);n(10),n(94);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function o(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l={props:{value:null},computed:{listeners:function(){var t=this;return o(o({},this.$listeners),{},{input:function(e){return t.$emit("input",e.target.value)}})},filled:function(){return null!=this.value&&this.value.toString().length>0}}},d=n(15),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g({class:["p-inputtext p-component",{"p-filled":t.filled}],domProps:{value:t.value}},t.listeners))}),[],!1,null,null,null);e.default=component.exports},586:function(t,e,n){"use strict";n.r(e);n(33),n(24),n(23),n(10),n(36),n(28),n(37);var r=n(17),c=n(16),o=(n(73),n(38)),l=n(509),d=n.n(l),f=n(551),v=n.n(f),m=(n(39),n(34),n(32),n(59),n(552)),h=n.n(m);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var x={name:"DeviceSetup",components:{FunctionalityCard:n(510).a,Multiselect:h.a},data:function(){return{device:null,deviceFunctionalities:[],loading:!1}},fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===t.$store.state.devices.types.length&&t.$store.dispatch("devices/getDeviceTypes");case 1:case"end":return e.stop()}}),e)})))()},watch:{"device.device_type":function(){var t=this;this.device.device_type&&this.$store.dispatch("devices/getDeviceTypeFunctionalities",this.device.device_type.id).then((function(e){t.deviceFunctionalities=e.map((function(t){return t.id}))}))}},computed:_(_({},Object(o.d)({deviceTypes:function(t){return t.devices.types},functionalities:function(t){return t.devices.functionalities}})),{},{name:function(){if(null!==this.device&&this.device.name){var t=this.device.name.replace(".lan","");return this.$filters.parseSlug(t)}return"Unknown device"},validDevice:function(){return!!this.device.name&&(!!this.device.device_type&&!this.loading)}}),mounted:function(){var t=this.$store.state.devices.newDevice.name;t&&(t=t.replace(".lan",""),t=this.$filters.parseSlug(t)),this.device={name:t,pihole_device_id:this.$store.state.devices.newDevice.id}},methods:{setupDevice:function(){var t=this;this.loading=!0;var e=this.device;e.functionalities=this.deviceFunctionalities,e.device_type_id=e.device_type.id,this.$store.dispatch("devices/addDevice",e).then((function(e){t.$toast.add({severity:"success",summary:"Saved",life:3e3}),t.$router.replace("/devices/"+e.id)})).catch((function(e){console.log(e),t.$toast.add({severity:"error",summary:"There has been an error",life:3e3})})).finally((function(){t.loading=!1}))}}},w=n(15);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var O={components:{DeviceSetup:Object(w.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.device?n("div",[n("header",[n("div",{staticClass:"py-4"},[n("h1",{staticClass:"text-3xl font-bold leading-tight text-gray-900"},[t._v("Setup "+t._s(t.name))])])]),t._v(" "),n("div",{staticClass:"space-y-8 divide-y divide-gray-200"},[n("div",{staticClass:"space-y-8 divide-y divide-gray-200 sm:space-y-5"},[n("div",[t._m(0),t._v(" "),n("div",{staticClass:"mt-6 sm:mt-5 space-y-6 sm:space-y-5"},[n("div",{staticClass:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5"},[n("label",{staticClass:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",attrs:{for:"device-name"}},[t._v(" Name ")]),t._v(" "),n("div",{staticClass:"mt-1 sm:mt-0 sm:col-span-2"},[n(v.a,{staticClass:"w-full",attrs:{id:"device-name"},model:{value:t.device.name,callback:function(e){t.$set(t.device,"name",e)},expression:"device.name"}})],1)]),t._v(" "),n("div",{staticClass:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5"},[n("label",{staticClass:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",attrs:{for:"device-type"}},[t._v(" Device Type ")]),t._v(" "),n("div",{staticClass:"mt-1 sm:mt-0 sm:col-span-2"},[n("multiselect",{attrs:{id:"device-type",options:t.deviceTypes,"track-by":"id",label:"name"},model:{value:t.device.device_type,callback:function(e){t.$set(t.device,"device_type",e)},expression:"device.device_type"}})],1)]),t._v(" "),n("div",{staticClass:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5"},[n("label",{staticClass:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"},[t._v(" Possible functionalities ")]),t._v(" "),n("div",{staticClass:"mt-1 sm:mt-0 sm:col-span-2 space-y-4"},t._l(t.functionalities,(function(e){return n("functionality-card",{key:e.id,attrs:{functionality:e},model:{value:t.deviceFunctionalities,callback:function(e){t.deviceFunctionalities=e},expression:"deviceFunctionalities"}})})),1)])])])]),t._v(" "),n("div",{staticClass:"pt-5"},[n("div",{staticClass:"flex justify-end"},[n("button",{staticClass:"bg-white mr-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",attrs:{type:"button"},on:{click:function(e){return t.$router.back()}}},[t._v("Cancel")]),t._v(" "),n(d.a,{attrs:{disabled:!t.validDevice,label:"Test"},on:{click:function(e){return t.setupDevice()}}},[t._v("Setup")])],1)])])]):t._e()}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",{staticClass:"text-lg leading-6 font-medium text-gray-900"},[t._v("Device type")]),t._v(" "),n("p",{staticClass:"mt-1 max-w-2xl text-sm text-gray-500"},[t._v("What kind of device is this?")])])}],!1,null,"42eaad42",null).exports},data:function(){return{text:null}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.d)({newDevice:function(t){return t.devices.newDevice}})),fetch:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.params,r=t.store,c=n.id,r.commit("devices/selectNewDevice",c),null==r.state.devices.newDevice&&r.dispatch("devices/getNewDevice",c);case 4:case"end":return e.stop()}}),e)})))()},methods:{greet:function(){this.$toast.add({severity:"info",summary:"Hello "+this.text})}}},j=O,k=Object(w.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-6"},[t.newDevice?n("device-setup"):t._e()],1)}),[],!1,null,null,null);e.default=k.exports}}]);